{
  "url": "https://api.github.com/repos/rspec/rspec/issues/50",
  "repository_url": "https://api.github.com/repos/rspec/rspec",
  "labels_url": "https://api.github.com/repos/rspec/rspec/issues/50/labels{/name}",
  "comments_url": "https://api.github.com/repos/rspec/rspec/issues/50/comments",
  "events_url": "https://api.github.com/repos/rspec/rspec/issues/50/events",
  "html_url": "https://github.com/rspec/rspec/issues/50",
  "id": 528816259,
  "node_id": "MDU6SXNzdWU1Mjg4MTYyNTk=",
  "number": 50,
  "title": "Trouble mocking stubing a class",
  "user": {
    "login": "abuzzany",
    "id": 4792866,
    "node_id": "MDQ6VXNlcjQ3OTI4NjY=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4792866?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abuzzany",
    "html_url": "https://github.com/abuzzany",
    "followers_url": "https://api.github.com/users/abuzzany/followers",
    "following_url": "https://api.github.com/users/abuzzany/following{/other_user}",
    "gists_url": "https://api.github.com/users/abuzzany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abuzzany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abuzzany/subscriptions",
    "organizations_url": "https://api.github.com/users/abuzzany/orgs",
    "repos_url": "https://api.github.com/users/abuzzany/repos",
    "events_url": "https://api.github.com/users/abuzzany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abuzzany/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-11-26T15:55:31Z",
  "updated_at": "2019-11-26T16:54:04Z",
  "closed_at": "2019-11-26T16:54:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi!\r\n\r\nI'm trying to stub a class that returns an OpenStruct like this:\r\n```ruby\r\n        body = {\r\n          \"bmx\": {\r\n            \"series\":[\r\n              \"datos\"\r\n            ]\r\n          }\r\n        }\r\n        response = OpenStruct.new(body: body)\r\n        http = OpenStruct.new(get: response)\r\n        result = OpenStruct.new(http: http)\r\n```\r\n\r\nbut always the object returned is the latest (body) and not result\r\n\r\n```ruby\r\n        allow(Banxico::Series::ExchangeRate).to receive(:new).and_return(result)\r\n```\r\n```bash\r\n      Banxico::Series::ExchangeRate.new\r\n     =&gt; #&lt;OpenStruct http=#&lt;OpenStruct get=#&lt;OpenStruct body={:bmx=&gt;{:series=&gt;[\"datos\"]}}&gt;&gt;&gt;\r\n```\r\n\r\nIs this a bug?\r\n",
  "closed_by": {
    "login": "abuzzany",
    "id": 4792866,
    "node_id": "MDQ6VXNlcjQ3OTI4NjY=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4792866?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abuzzany",
    "html_url": "https://github.com/abuzzany",
    "followers_url": "https://api.github.com/users/abuzzany/followers",
    "following_url": "https://api.github.com/users/abuzzany/following{/other_user}",
    "gists_url": "https://api.github.com/users/abuzzany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abuzzany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abuzzany/subscriptions",
    "organizations_url": "https://api.github.com/users/abuzzany/orgs",
    "repos_url": "https://api.github.com/users/abuzzany/repos",
    "events_url": "https://api.github.com/users/abuzzany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abuzzany/received_events",
    "type": "User",
    "site_admin": false
  },
  "performed_via_github_app": null
}